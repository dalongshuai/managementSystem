(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84fee4c8"],{"03ae":function(e,t,r){"use strict";r.r(t);var o,a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"goods-manage"},[r("el-card",{staticClass:"box-card",attrs:{"body-style":"height:110%;"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("商品管理")])])]),r("div",{staticClass:"product-list"},[r("div",{staticClass:"search"},[r("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"100px",size:"mini"}},[r("el-form-item",{attrs:{label:"",prop:"region"}},[r("el-select",{attrs:{placeholder:"------选择分类------"},model:{value:e.searchForm.region,callback:function(t){e.$set(e.searchForm,"region",t)},expression:"searchForm.region"}},[r("el-option",{attrs:{label:"全部",value:"全部"}}),r("el-option",{attrs:{label:"家电",value:"家电"}}),r("el-option",{attrs:{label:"生活用品",value:"生活用品"}}),r("el-option",{attrs:{label:"烟酒",value:"烟酒"}}),r("el-option",{attrs:{label:"食品",value:"食品"}})],1)],1),r("el-form-item",{attrs:{label:"关键字:",prop:"keychar",width:"30%"}},[r("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"商品名称、条形码"},model:{value:e.searchForm.keychar,callback:function(t){e.$set(e.searchForm,"keychar",t)},expression:"searchForm.keychar"}})],1),r("el-button",{staticClass:"btn1",attrs:{type:"primary"},on:{click:e.getsearch}},[e._v("查询")])],1)],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"110%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"35"}}),r("el-table-column",{attrs:{prop:"procode",label:"商品条形码",width:"140"}}),r("el-table-column",{attrs:{prop:"proname",label:"商品名称",width:"150"}}),r("el-table-column",{attrs:{prop:"region",label:"所属分类",width:"130"}}),r("el-table-column",{attrs:{prop:"prosale",label:"售价(元)",width:"110"}}),r("el-table-column",{attrs:{prop:"promotionprice",label:"促销价(元)",width:"110"}}),r("el-table-column",{attrs:{prop:"marketprice",label:"市场价(元)",width:"110"}}),r("el-table-column",{attrs:{prop:"repertory",label:"库存",width:"110"}}),r("el-table-column",{attrs:{prop:"repertorysum",label:"库存总额",width:"110"}}),r("el-table-column",{attrs:{prop:"salesum",label:"销售总额",width:"110"}}),r("el-table-column",{attrs:{prop:"manage",label:"管理",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.handleEdit(t.row.id)}}},[r("i",{staticClass:"el-icon-edit"})]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.row.id)}}},[r("i",{staticClass:"el-icon-delete"})]),r("el-dialog",{attrs:{title:"修改用户",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules2,"label-width":"100px",size:"mini"}},[r("el-form-item",{attrs:{label:"所属分类",prop:"region"}},[r("el-select",{attrs:{placeholder:"----选择分类----"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[r("el-option",{attrs:{label:"家电",value:"家电",selected:"selected"}}),r("el-option",{attrs:{label:"生活用品",value:"生活用品"}}),r("el-option",{attrs:{label:"烟酒",value:"烟酒"}}),r("el-option",{attrs:{label:"食品",value:"食品"}})],1)],1),r("el-form-item",{attrs:{label:"商品名称",prop:"proname"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.form.proname,callback:function(t){e.$set(e.form,"proname",t)},expression:"form.proname"}})],1),r("el-form-item",{attrs:{label:"商品售价",prop:"prosale"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.form.prosale,callback:function(t){e.$set(e.form,"prosale",t)},expression:"form.prosale"}})],1),r("el-form-item",{attrs:{label:"市场价",prop:"marketprice"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.form.marketprice,callback:function(t){e.$set(e.form,"marketprice",t)},expression:"form.marketprice"}})],1),r("el-form-item",{attrs:{label:"促销价",prop:"promotionprice"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.form.promotionprice,callback:function(t){e.$set(e.form,"promotionprice",t)},expression:"form.promotionprice"}})],1),r("el-form-item",{attrs:{label:"库存",prop:"repertory"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.form.repertory,callback:function(t){e.$set(e.form,"repertory",t)},expression:"form.repertory"}})],1),r("el-form-item",{attrs:{label:"库存总额",prop:"repertorysum"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.form.repertorysum,callback:function(t){e.$set(e.form,"repertorysum",t)},expression:"form.repertorysum"}})],1),r("el-form-item",{attrs:{label:"销售总额",prop:"salesum"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.form.salesum,callback:function(t){e.$set(e.form,"salesum",t)},expression:"form.salesum"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("修改")]),r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)]}}])})],1),r("div",{staticClass:"btn",staticStyle:{"margin-top":"20px"}},[r("el-button",{attrs:{type:"danger"},on:{click:e.batchRemove}},[e._v("批量删除")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toggleSelection()}}},[e._v("取消选择")])],1),r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[1,5,10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],i=r("85f2"),s=r.n(i);function n(e,t,r){return t in e?s()(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={data:function(){var e=function(e,t,r){var o=/^(-?\d+)(\.\d+)?$/;o.test(t)?r():r(new Error("请输入数字"))};return{rules2:{proname:[{required:!0,message:"请输入商品名称",trigger:"blur"}],prosale:[{required:!0,validator:e,trigger:"blur"}],region:[{required:!0,message:"请选择用户组",trigger:"change"}],marketprice:[{required:!0,validator:e,trigger:"blur"}],promotionprice:[{required:!0,validator:e,trigger:"blur"}],repertory:[{required:!0,validator:e,trigger:"blur"}],repertorysum:[{required:!0,validator:e,trigger:"blur"}],salesum:[{required:!0,validator:e,trigger:"blur"}]},formLabelWidth:"70px",tableData:[{procode:"",proname:"",region:"",prosale:0,promotionprice:0,marketprice:0,repertory:0,repertorysum:0,salesum:0}],form:{id:0,proname:"",region:"",prosale:0,promotionprice:0,marketprice:0,repertory:0,repertorysum:0,salesum:0},dialogFormVisible:!1,currentPage:1,pageSize:5,total:0,dataId:[],searchForm:{region:"",keychar:""}}},methods:(o={getGoodsList:function(){var e=this,t={currentPage:this.currentPage,pageSize:this.pageSize,region:this.searchForm.region,keychar:this.searchForm.keychar};console.log(t),this.req.post("/goods/goodslist",t).then(function(r){var o=r.total,a=r.data;0===a.length&&e.currentPage>0&&(t.currentPage-=1,e.req.post("/goods/goodslist",t).then(function(t){var r=t.total,o=t.data;e.tableData=o,e.total=r}).catch(function(e){console.log(e)})),e.tableData=a,e.total=o}).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.pageSize=e,this.getGoodsList()},handleCurrentChange:function(e){this.currentPage=e,this.getGoodsList()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.req.get("/goods/goodsdel",{id:e}).then(function(e){var r=e.code,o=e.reason;0===r?(t.$message({type:"success",message:o}),t.getGoodsList()):1===r&&t.$message({type:"error",message:o})}).catch(function(e){console.log(res)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},toggleSelection:function(){this.$refs.multipleTable.clearSelection()},handleEdit:function(e){var t=this;this.dialogFormVisible=!0,this.form.id=e,this.req.post("/goods/goodsedit",{id:e}).then(function(e){t.form=e[0]}).catch(function(e){console.log(e)})},submitForm:function(e){var t=this,r={region:this.form.region,proname:this.form.proname,prosale:this.form.prosale,marketprice:this.form.marketprice,promotionprice:this.form.promotionprice,repertory:this.form.repertory,repertorysum:this.form.repertorysum,salesum:this.form.salesum,id:this.form.id};this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.req.post("/goods/goodseditsave",r).then(function(e){t.$message({message:"商品修改成功",type:"success",center:!0}),t.dialogFormVisible=!1,t.getGoodsList()}).catch(function(e){console.log(e)})})}},n(o,"toggleSelection",function(){this.$refs.multipleTable.clearSelection()}),n(o,"handleSelectionChange",function(e){this.dataId=e.map(function(e){return e.id})}),n(o,"batchRemove",function(){var e=this,t=this.dataId;t.length>0&&this.req.get("/goods/batchremove",{id:t}).then(function(t){var r=t.code,o=t.reason;0===r?(e.$message({type:"success",center:!0,message:o}),e.getGoodsList()):1===r&&e.$message({type:"error",center:!0,message:o})}).catch(function(e){console.log(e)})}),n(o,"getsearch",function(){this.getGoodsList()}),o),created:function(){this.getGoodsList()}},p=c,m=(r("567b"),r("2877")),u=Object(m["a"])(p,a,l,!1,null,null,null);t["default"]=u.exports},"454f":function(e,t,r){r("46a7");var o=r("584a").Object;e.exports=function(e,t,r){return o.defineProperty(e,t,r)}},"46a7":function(e,t,r){var o=r("63b6");o(o.S+o.F*!r("8e60"),"Object",{defineProperty:r("d9f6").f})},"4f69":function(e,t,r){},"567b":function(e,t,r){"use strict";var o=r("4f69"),a=r.n(o);a.a},"85f2":function(e,t,r){e.exports=r("454f")}}]);
//# sourceMappingURL=chunk-84fee4c8.9cf0328a.js.map