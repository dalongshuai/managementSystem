{"version":3,"sources":["webpack:///./src/views/Personcenter/Personcenter.vue?1fb9","webpack:///./src/views/Personcenter/Personcenter.vue?57ab","webpack:///src/views/Personcenter/Personcenter.vue","webpack:///./src/views/Personcenter/Personcenter.vue?928c","webpack:///./src/views/Personcenter/Personcenter.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Personcenter_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Personcenter_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","action","http-request","submit2","show-file-list","on-success","handleAvatarSuccess","before-upload","beforeAvatarUpload","src","imageUrl","staticRenderFns","Personcentervue_type_script_lang_js_","data","methods","res","file","URL","createObjectURL","raw","code","reason","$message","type","message","isJPG","isLt2M","size","error","_this","fd","FormData","append","token","window","localStorage","getItem","axios_default","a","post","headers","Content-Type","authorization","concat","then","response","_response$data","imgurl","$emit","catch","err","console","log","Personcenter_Personcentervue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"kHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAuiBE,EAAG,qECA1iB,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,iBAA4B,CAAAF,EAAA,aAAkBG,IAAA,SAAAD,YAAA,kBAAAE,MAAA,CAAkDC,OAAA,6CAAAC,eAAAV,EAAAW,QAAAC,kBAAA,EAAAC,aAAAb,EAAAc,oBAAAC,gBAAAf,EAAAgB,qBAAqL,CAAAhB,EAAA,SAAAI,EAAA,OAA2BE,YAAA,SAAAE,MAAA,CAA4BS,IAAAjB,EAAAkB,YAAoBd,EAAA,KAAUE,YAAA,yCAAgD,IACpgBa,EAAA,wBCkBAC,EAAA,CACAC,KADA,WAEA,OACAH,SAAA,KAGAI,QAAA,CAEAR,oBAFA,SAEAS,EAAAC,GACAvB,KAAAiB,SAAAO,IAAAC,gBAAAF,EAAAG,KADA,IAEAC,EAAAL,EAAAK,KAAAC,EAAAN,EAAAM,OACA,IAAAD,GACA3B,KAAA6B,SAAA,CACAC,KAAA,UACAC,QAAAH,KAIAb,mBAZA,SAYAQ,GACA,IAAAS,EAAA,eAAAT,EAAAO,KACAG,EAAAV,EAAAW,KAAA,YAQA,OANAF,GACAhC,KAAA6B,SAAAM,MAAA,qBAEAF,GACAjC,KAAA6B,SAAAM,MAAA,qBAEAH,GAAAC,GAEAvB,QAxBA,SAwBAa,GAAA,IAAAa,EAAApC,KACAqC,EAAA,IAAAC,SACAD,EAAAE,OAAA,OAAAhB,QAGA,IAAAiB,EAAAC,OAAAC,aAAAC,QAAA,SAGAC,EAAAC,EAAAC,KAAA,wBACAT,EACA,CAAAU,QAAA,CAAAC,eAAA,sBAAAC,cAAA,UAAAC,OAAAV,MAEAW,KAAA,SAAAC,GAAA,IAAAC,EACAD,EAAAhC,KAAAO,EADA0B,EACA1B,KAAAC,EADAyB,EACAzB,OAAA0B,EADAD,EACAC,OACA,IAAA3B,GAEAS,EAAAnB,SAAA,wBAAAiC,OAAAI,GAEAlB,EAAAP,SAAA,CACAC,KAAA,UACAC,QAAAH,IAIAQ,EAAAmB,MAAA,iBAEA,IAAA5B,GAEAS,EAAAP,SAAA,CACAC,KAAA,UACAC,QAAAH,MAIA4B,MAAA,SAAAC,GACAC,QAAAC,IAAAF,QCpFqWG,EAAA,0BCQrWC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACA9D,EACAoB,GACF,EACA,KACA,KACA,MAIe8C,EAAA,WAAAH","file":"js/chunk-4902c4ec.5bad65d1.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personcenter.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personcenter.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"person-center\"},[_c('el-upload',{ref:\"upload\",staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://127.0.0.1:2888/account/uploadavatar\",\"http-request\":_vm.submit2,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"person-center\">\r\n        <el-upload\r\n        ref=\"upload\"\r\n        class=\"avatar-uploader\"\r\n        action=\"http://127.0.0.1:2888/account/uploadavatar\"\r\n        :http-request=\"submit2\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :before-upload=\"beforeAvatarUpload\">\r\n        <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from \"axios\"\r\nexport default {\r\n    data() {\r\n      return {\r\n        imageUrl: ''\r\n      };\r\n    },\r\n    methods: {\r\n      // 上传成功回显\r\n      handleAvatarSuccess(res, file) {\r\n        this.imageUrl = URL.createObjectURL(file.raw);\r\n        let {code,reason} = res;\r\n        if(code === 0){\r\n          this.$message({\r\n              type:'success',\r\n              message:reason\r\n          })\r\n        }\r\n      },\r\n      beforeAvatarUpload(file) {\r\n        const isJPG = file.type === 'image/jpeg';\r\n        const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n        if (!isJPG) {\r\n          this.$message.error('上传头像图片只能是 JPG 格式!');\r\n        }\r\n        if (!isLt2M) {\r\n          this.$message.error('上传头像图片大小不能超过 2MB!');\r\n        }\r\n        return isJPG && isLt2M;\r\n      },\r\n      submit2(file){\r\n        let fd = new FormData() // 浏览器对象 主要用于上传\r\n        fd.append('file',file.file);\r\n\r\n        // 获取token\r\n        const token = window.localStorage.getItem(\"token\");\r\n        \r\n        // 发送请求\r\n        axios.post('/account/uploadavatar', \r\n                fd,\r\n                { headers: { 'Content-Type': 'multipart/form-data', 'authorization': `Bearer ${token}`} \r\n            })\r\n                .then(response => {\r\n                    let { code, reason, imgurl } = response.data;\r\n                    if (code === 0) {\r\n                        // 回填头像\r\n                        this.imageUrl = `http://127.0.0.1:2888${imgurl}`;\r\n                        // 成功提示\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: reason\r\n                        })\r\n\r\n                        // 触发父组件方法\r\n                        this.$emit('updateAvatar')\r\n\r\n                    } else if (code === 1) {\r\n                        // 弹失败信息\r\n                        this.$message({\r\n                          type:'success',\r\n                          message:reason\r\n                        })\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err)\r\n                })\r\n\r\n      \r\n      \r\n      \r\n      \r\n      \r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"./personCenter.less\";\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personcenter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personcenter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Personcenter.vue?vue&type=template&id=64ac311f&\"\nimport script from \"./Personcenter.vue?vue&type=script&lang=js&\"\nexport * from \"./Personcenter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Personcenter.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}